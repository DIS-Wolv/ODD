
locationType = ['NameCityCapital','NameCity','NameVillage','Name','NameLocal','Hill'];


locationBlkList = ["","Fournos", "Neochori", "Monisi", "Agios Kosmas", "Cape Makrinos", "Pyrgi", "Sagonisi", "Agios Panagiotis", "Savri", "Cape Drakontas","Riga","Skopos","Amoni","Amfissa","Kira","Bomos","Synneforos","Atsalis","Thronos","Cape Agrios","Nychi","Zeloran","Cape Zefyris","Agios Georgios","Almyra","Agios Andreas","Sideras","Polemistia","Skiptro","Ochrolimni","Chelonisi","Didymos","Mazi",""];

Maison = [
	"Land_Chapel_V1_F","Land_Chapel_V2_F","Land_Chapel_Small_V1_F","Land_Chapel_Small_V2_F","Land_Offices_01_V1_F","Land_Castle_01_tower_F","Land_LightHouse_F","Land_WIP_F","Land_u_Addon_02_V1_F","Land_i_Addon_02_V1_F","Land_i_Addon_03_V1_F","Land_i_Addon_03mid_V1_F","Land_i_Addon_04_V1_F","Land_i_Garage_V1_F","Land_i_Garage_V1_dam_F","Land_i_Garage_V2_F","Land_i_Garage_V2_dam_F","Land_Metal_Shed_F","Land_i_House_Big_01_V1_F","Land_i_House_Big_01_V1_dam_F","Land_i_House_Big_01_V2_F","Land_i_House_Big_01_V2_dam_F","Land_i_House_Big_01_V3_F","Land_i_House_Big_01_V3_dam_F","Land_u_House_Big_01_V1_F","Land_u_House_Big_01_V1_dam_F","Land_d_House_Big_01_V1_F","Land_i_House_Big_02_V1_F","Land_i_House_Big_02_V1_dam_F","Land_i_House_Big_02_V2_F","Land_i_House_Big_02_V2_dam_F","Land_i_House_Big_02_V3_F","Land_i_House_Big_02_V3_dam_F","Land_u_House_Big_02_V1_F","Land_u_House_Big_02_V1_dam_F","Land_d_House_Big_02_V1_F","Land_i_Shop_01_V1_F","Land_i_Shop_01_V1_dam_F","Land_i_Shop_01_V2_F","Land_i_Shop_01_V2_dam_F","Land_i_Shop_01_V3_F","Land_i_Shop_01_V3_dam_F","Land_u_Shop_01_V1_F","Land_u_Shop_01_V1_dam_F","Land_d_Shop_01_V1_F","Land_i_Shop_02_V1_F","Land_i_Shop_02_V1_dam_F","Land_i_Shop_02_V2_F","Land_i_Shop_02_V2_dam_F","Land_i_Shop_02_V3_F","Land_i_Shop_02_V3_dam_F","Land_u_Shop_02_V1_F","Land_u_Shop_02_V1_dam_F","Land_d_Shop_02_V1_F","Land_i_House_Small_01_V1_F","Land_i_House_Small_01_V1_dam_F","Land_i_House_Small_01_V2_F","Land_i_House_Small_01_V2_dam_F","Land_i_House_Small_01_V3_F","Land_i_House_Small_01_V3_dam_F","Land_u_House_Small_01_V1_F","Land_u_House_Small_01_V1_dam_F","Land_d_House_Small_01_V1_F","Land_i_House_Small_02_V1_F","Land_i_House_Small_02_V1_dam_F","Land_i_House_Small_02_V2_F","Land_i_House_Small_02_V2_dam_F","Land_i_House_Small_02_V3_F","Land_i_House_Small_02_V3_dam_F","Land_u_House_Small_02_V1_F","Land_u_House_Small_02_V1_dam_F","Land_d_House_Small_02_V1_F","Land_i_House_Small_03_V1_F","Land_i_House_Small_03_V1_dam_F","Land_cargo_house_slum_F","Land_Slum_House01_F","Land_Slum_House02_F","Land_Slum_House03_F","Land_i_Stone_HouseBig_V1_F","Land_i_Stone_HouseBig_V1_dam_F","Land_i_Stone_HouseBig_V2_F","Land_i_Stone_HouseBig_V2_dam_F","Land_i_Stone_HouseBig_V3_F","Land_i_Stone_HouseBig_V3_dam_F","Land_d_Stone_HouseBig_V1_F","Land_i_Stone_Shed_V1_F","Land_i_Stone_Shed_V1_dam_F","Land_i_Stone_Shed_V2_F","Land_i_Stone_Shed_V2_dam_F","Land_i_Stone_Shed_V3_F","Land_i_Stone_Shed_V3_dam_F","Land_d_Stone_Shed_V1_F","Land_i_Stone_HouseSmall_V1_F","Land_i_Stone_HouseSmall_V1_dam_F","Land_i_Stone_HouseSmall_V2_F","Land_i_Stone_HouseSmall_V2_dam_F","Land_i_Stone_HouseSmall_V3_F","Land_i_Stone_HouseSmall_V3_dam_F","Land_d_Stone_HouseSmall_V1_F","Land_Unfinished_Building_01_F","Land_Unfinished_Building_02_F","Land_Airport_Tower_F","Land_Airport_Tower_dam_F","Land_Hangar_F","Land_CarService_F","Land_dp_mainFactory_F","Land_Factory_Main_F","Land_FuelStation_Build_F","Land_Shed_Small_F","Land_i_Shed_Ind_F","Land_u_Shed_Ind_F","Land_spp_Tower_F","Land_TTowerBig_1_F","Land_TTowerBig_2_F","Land_d_Windmill01_F","Land_i_Windmill01_F","Land_BagBunker_Large_F","Land_BagBunker_Small_F","Land_BagBunker_Tower_F","Land_i_Barracks_V1_F","Land_i_Barracks_V1_dam_F","Land_i_Barracks_V2_F","Land_i_Barracks_V2_dam_F","Land_u_Barracks_V2_F","Land_Cargo_House_V1_F","Land_Cargo_House_V2_F","Land_Cargo_House_V3_F","Land_Cargo_HQ_V1_F","Land_Cargo_HQ_V2_F","Land_Cargo_HQ_V3_F","Land_Cargo_Patrol_V1_F","Land_Cargo_Patrol_V2_F","Land_Cargo_Patrol_V3_F","Land_Cargo_Tower_V1_F","Land_Cargo_Tower_V1_No1_F","Land_Cargo_Tower_V1_No2_F","Land_Cargo_Tower_V1_No3_F","Land_Cargo_Tower_V1_No4_F","Land_Cargo_Tower_V1_No5_F","Land_Cargo_Tower_V1_No6_F","Land_Cargo_Tower_V1_No7_F","Land_Cargo_Tower_V2_F","Land_Cargo_Tower_V3_F","Land_Medevac_house_V1_F","Land_Medevac_HQ_V1_F","Land_HBarrierTower_F","Land_MilOffices_V1_F","Land_Radar_Small_F","CamoNet_BLUFOR_F","CamoNet_OPFOR_F","CamoNet_INDP_F","CamoNet_BLUFOR_open_F","CamoNet_OPFOR_open_F","CamoNet_INDP_open_F","CamoNet_BLUFOR_big_F","CamoNet_OPFOR_big_F","CamoNet_INDP_big_F","Land_nav_pier_m_F","Land_Pier_addon","Land_Pier_Box_F","Land_Pier_F","Land_Pier_small_F","Land_Pier_wall_F","Land_Dome_Big_F","Land_Dome_Small_F","Land_Research_house_V1_F","Land_Research_HQ_F","Land_BeachBooth_01_F","Land_LifeguardTower_01_F","Land_Kiosk_blueking_F","Land_Kiosk_gyros_F","Land_Kiosk_papers_F","Land_Kiosk_redburger_F","Land_GH_Gazebo_F","Land_GH_House_1_F","Land_GH_House_2_F","Land_GH_MainBuilding_entry_F","Land_GH_MainBuilding_left_F","Land_GH_MainBuilding_middle_F","Land_GH_MainBuilding_right_F","Land_GH_Platform_F","Land_GH_Stairs_F","Land_Stadium_p1_F","Land_Stadium_p2_F","Land_Stadium_p3_F","Land_Stadium_p4_F","Land_Stadium_p5_F","Land_Stadium_p6_F","Land_Stadium_p7_F","Land_Stadium_p8_F","Land_Stadium_p9_F","Land_IRMaskingCover_01_F","Land_IRMaskingCover_02_F","Land_GarageShelter_01_F","Land_House_Big_01_F","Land_House_Big_02_F","Land_House_Big_03_F","Land_House_Big_04_F","Land_House_Big_05_F","Land_House_Native_01_F","Land_House_Native_02_F","Land_House_Small_01_F","Land_House_Small_02_F","Land_House_Small_03_F","Land_House_Small_04_F","Land_House_Small_06_F","Land_School_01_F","Land_Shed_01_F","Land_Shed_02_F","Land_Shed_03_F","Land_Shed_04_F","Land_Shed_05_F","Land_Shed_07_F","Land_Slum_01_F","Land_Slum_02_F","Land_Slum_03_F","Land_Addon_04_F","Land_FuelStation_01_shop_F","Land_FuelStation_01_workshop_F","Land_Hotel_01_F","Land_Hotel_02_F","Land_MetalShelter_01_F","Land_MetalShelter_02_F","Land_Shop_City_01_F","Land_Shop_Town_01_F","Land_Shop_Town_03_F","Land_Supermarket_01_F","Land_Warehouse_03_F","Land_Mausoleum_01_F","Land_Church_02_F","Land_Fortress_01_5m_F","Land_Fortress_01_10m_F","Land_Fortress_01_innerCorner_70_F","Land_Fortress_01_innerCorner_90_F","Land_Fortress_01_innerCorner_110_F","Land_Fortress_01_outterCorner_50_F","Land_Fortress_01_outterCorner_80_F","Land_Fortress_01_outterCorner_90_F","Land_Temple_Native_01_F","Land_DPP_01_mainFactory_F","Land_GuardHouse_01_F","Land_Warehouse_02_F","Land_SCF_01_clarifier_F","Land_SCF_01_generalBuilding_F","Land_SCF_01_chimney_F","Land_SCF_01_storageBin_big_F","Land_SCF_01_storageBin_medium_F","Land_SM_01_reservoirTower_F","Land_SM_01_shed_F","Land_SM_01_shed_unfinished_F","Land_SM_01_shelter_narrow_F","Land_SM_01_shelter_wide_F","Land_Airport_01_controlTower_F","Land_Airport_01_hangar_F","Land_Airport_01_terminal_F","Land_Airport_02_controlTower_F","Land_Airport_02_hangar_left_F","Land_Airport_02_hangar_right_F","Land_Airport_02_terminal_F","Land_Barracks_01_camo_F","Land_Barracks_01_grey_F","Land_Barracks_01_dilapidated_F","CamoNet_ghex_F","CamoNet_ghex_open_F","CamoNet_ghex_big_F","Land_Cargo_House_V4_F","Land_Cargo_HQ_V4_F","Land_Cargo_Patrol_V4_F","Land_Cargo_Tower_V4_F","Land_BagBunker_01_large_green_F","Land_BagBunker_01_small_green_F","Land_HBarrier_01_big_tower_green_F","Land_HBarrier_01_tower_green_F","Land_PillboxBunker_01_big_F","Land_PillboxBunker_01_hex_F","Land_PillboxBunker_01_rectangle_F","Land_PierConcrete_01_4m_ladders_F","Land_PierConcrete_01_16m_F","Land_PierConcrete_01_30deg_F","Land_PierConcrete_01_end_F","Land_PierConcrete_01_steps_F","Land_PierWooden_01_10m_noRails_F","Land_PierWooden_01_16m_F","Land_PierWooden_01_dock_F","Land_PierWooden_01_hut_F","Land_PierWooden_01_ladder_F","Land_PierWooden_01_platform_F","Land_PierWooden_02_16m_F","Land_PierWooden_02_30deg_F","Land_PierWooden_02_barrel_F","Land_PierWooden_02_hut_F","Land_PierWooden_02_ladder_F","Land_PierWooden_03_F","Land_BasaltWall_01_gate_F","Land_Castle_01_wall_01_F","Land_Castle_01_wall_02_F","Land_Castle_01_wall_03_F","Land_Castle_01_wall_04_F","Land_Castle_01_wall_05_F","Land_Castle_01_wall_06_F","Land_Castle_01_wall_07_F","Land_Castle_01_wall_08_F","Land_Castle_01_wall_09_F","Land_Castle_01_wall_10_F","Land_Castle_01_wall_11_F","Land_Castle_01_wall_12_F","Land_Castle_01_wall_13_F","Land_Castle_01_wall_14_F","Land_Castle_01_wall_15_F","Land_Castle_01_wall_16_F","Land_Castle_01_house_ruin_F","Land_Castle_01_church_a_ruin_F","Land_Castle_01_church_b_ruin_F","Land_Castle_01_church_ruin_F","Land_Castle_01_step_F","Land_Hospital_main_F","Land_Hospital_side1_F","Land_Hospital_side2_F"
];

pair = [
	["brf_o_ard_atr_rpg7","brf_o_ard_rifleman"],
	["brf_o_ard_machinegunner","brf_o_ard_machinegunner_asst"]
];

/*
_Buildings = nearestObjects [position player, Maison, 100];

//systemChat(str(_Buildings));
{
	private _group = selectRandom pair;
	_g = [position _x, EAST, _group] call BIS_fnc_spawnGroup;
	
	//met en garnison
	[position _x, ["Building"], _g, 20, 1, false, true] execVM "/z/ace/addons/ai/functions/fnc_garrison.sqf";
	
	sleep 5;
	
}foreach _Buildings;
//*/

//*
{
	//if(getMarkerType _x != "Empty")then { 
		deleteMarker(_x);
	//}
}foreach allMapMarkers; 

private _human_players = count(allPlayers - entities "HeadlessClient_F"); // removing Headless Clients
private _heure = date select 3;			// heure de la journ√©e
private _nb = [0,0,0,0,0,0];
/*
private _t = 0;
_r = [0,0,0];
while {_t < 10000}do{
	_y = round random[0,(_human_players/8),8];
	if ( _y < 0.5) then {_r set [0, (_r select 0) + 1]}
	else{
		if ( _y < 1) then {_r set [1, (_r select 1) + 1]};
		if ( _y >= 1) then {_r set [2, (_r select 2) + 1]};
	};
	_t = _t + 1;
	
};
systemChat(str(_r));	//*/

_Dist = 10000000;

_location = nearestLocations[[15000,15000], locationType, 30000];
//_location = [];
{
	_pos = getpos _x;
	// if( _forEachIndex == 75) then {
	if (!(text _x in ODD_var_LocationBlkList)) then {
	// if (text _x in ["dump"]) then {
		//pr√©paration des variables pour le calcule du nombre de groupe
		_locProx = nearestLocations [position _x, locationType, 3000]; //Recup les location a - de 3000m 
		{
			if (text _x in locationBlkList) then {		//si dans la liste Noir 
				_locProx deleteAt _forEachIndex;				//on delete la location de notre liste 
			};
		}forEach _locProx;		// /!\ pas compt√© celle ou on est 
		_Buildings = nearestObjects [position _x, Maison, size _x select 0];	//Nombre de maison dans la localit√©
		_taille = size _x select 0;		// Taille de la Zone
		private _locType = 0;
		
		if (type _x == locationType select 5) then { _locType = 0; _nb set[0,(_nb select 0)+ 1 ];};
		if (type _x == locationType select 4) then { _locType = 1; _nb set[1,(_nb select 1)+ 1 ];};
		if (type _x == locationType select 3) then { _locType = 2; _nb set[2,(_nb select 2)+ 1 ];};
		if (type _x == locationType select 2) then { _locType = 3; _nb set[3,(_nb select 3)+ 1 ];};
		if (type _x == locationType select 1) then { _locType = 4; _nb set[4,(_nb select 4)+ 1 ];};
		if (type _x == locationType select 0) then { _locType = 5; _nb set[5,(_nb select 5)+ 1 ];};
		
		{
			if (_x in ["military", "airbase", "airfield"]) then {_locType = 3;};
		}forEach ((text _x) splitString " ");
		
		// _locType = (_locType + random[-1.2,0,1.2]) max 0;
		
		/*systemChat(format["Patrol %1 + %2 + %3 -%4 - %5 - %6 + 4 = %7 ~ %8",
			(_taille / 150),
			((count _Buildings)^(1/3)),
			(_human_players / 4),
			((_locType^2) / 2),
			(((count _locProx)/ 5) ^ (3/2)),
			((((_heure - 12)^2)/ 48 ) + 3 ),
			(_taille / 75 + (count _Buildings)^(1/2) + _human_players / 4 - ((_locType^2) / 2) - ((count _locProx)/ 5) ^ (3/2) - ((((_heure - 12)^2)/ 48 ) + 3 ) + 4),
			round(_taille / 75 + (count _Buildings)^(1/2) + (_human_players / 4) - ((_locType^2) / 2) - ((count _locProx)/ 5) ^ (3/2) - ((((_heure - 12)^2)/ 48 ) + 3 ) + 4)]
		);//*/
		/*systemChat(format["Garnison %1 + %2 + %3- %4 - %5 + 4 = %6 ~ %7",
			(_human_players / 2),
			(_taille / 50),
			(4*(_locType^(1.2))),
			(((count _locProx)/ 7) ^ 2),
			((((_heure - 12)^2)/ 48 ) + 3 ),
			((_human_players / 2) + (_taille / 50) + (4*(_locType^(1.2))) - (((count _locProx)/ 7) ^ 2) - ((((_heure - 12)^2)/ 48 ) + 3 ) + 4),
			round((_human_players / 2) + (_taille / 50) + (4*(_locType^(1.2))) - (((count _locProx)/ 7) ^ 2) - ((((_heure - 12)^2)/ 48 ) + 3 ) + 4)]
		);//*//*
		_NbPatrouille = round(
			(
				(_taille / 75)
				+ ((count _Buildings)^(1/2)) 
				+ (_human_players / 4) 
				- ((_locType^2) / 2) 
				- (((count _locProx)/ 5) ^ (3/2)) 
				- ((((_heure - 12)^2)/ 48 ) + 3 ) 
				+ 4
			)/2);
	
		_NbGarnison = round(
			(
				(_human_players / 2) 
				+ (_taille / 50) 
				+ (4*(_locType^(1.2))) 
				- (((count _locProx)/ 7) ^ 2) 
				- ((((_heure - 12)^2)/ 48 ) + 3 ) 
				+ 4
			)/2);
		
		private _nbCivil = 0;
		if (_locType == 5) then {
			_nbCivil = (count _Buildings) / 24;
		};
		if (_locType == 4) then {
			_nbCivil = (count _Buildings) / 25;
		};
		if (_locType == 3) then {
			_nbCivil = (count _Buildings) / 16;
		};
		if (_locType == 2) then {
			_nbCivil = 0;
		};
		if (_locType == 1) then {
			_nbCivil = (count _Buildings) / 10;
		};
		_nbCivil = round (0 max _nbCivil);
		
		_NbPatrouille = 2 max _NbPatrouille;
		_NbGarnison = 2 max _NbGarnison;
		
		
		_marker = createMarker [(format ["obj P x %1, y %2, z %3", (_pos select 0), (_pos select 1), (_pos select 2)]), _pos]; 
		_marker setMarkerType "hd_objective";
		_marker setMarkerColor "colorOPFOR";
		_marker setMarkerText format["%1 | T %2 | G %3 | P %4 | B %5 | C %6 | N %7", 
			text _x,  
			_locType,
			_NbGarnison,
			_NbPatrouille,
			count _Buildings,
			_NbCivil,
			_foreachindex]; /*

		_markerG = createMarker [(format ["obj Z x %1, y %2, z %3", (_pos select 0), (_pos select 1), (_pos select 2)]), _pos]; 
		_markerG setMarkerShape "ELLIPSE";
		_markerG setMarkerSize [((size _x select 0) * 2), ((size _x select 0) * 2)];
		_markerG setMarkerBrush "SolidBorder";
		_markerG setMarkerAlpha 0.4; 
		_markerG setMarkerColor "colorOPFOR"; //*/
		
		_markerG2 = createMarker [(format ["obj Z2 x %1, y %2, z %3", (_pos select 0), (_pos select 1), (_pos select 2)]), _pos]; 
		_markerG2 setMarkerShape "RECTANGLE";
		_markerG2 setMarkerSize [size _x select 1,size _x select 1];
		_markerG2 setMarkerBrush "SolidBorder";
		_markerG2 setMarkerAlpha 0.2; 
		_markerG2 setMarkerColor "ColorYellow";//*/

		_Dist = _Dist min ((size _x select 0) * 2);
		
	}
	else {
		_marker = createMarker [(format ["obj P x %1, y %2, z %3", (_pos select 0), (_pos select 1), (_pos select 2)]), _pos]; 
		_marker setMarkerType "hd_destroy_noShadow";
		_marker setMarkerColor "ColorBlack";
		_marker setMarkerText format["%1 | %2 | %3 | %4", text _x, type _x, size _x select 0, _forEachIndex];
	};
}forEach _location;
/*
//systemChat str _Dist;
_Sect = [
	"ODD_MarkerNW", "ODD_MarkerN", "ODD_MarkerNE",
	"ODD_MarkerW", "ODD_MarkerC", "ODD_MarkerE",
	"ODD_MarkerSW", "ODD_MarkerS", "ODD_MarkerSE"
	// [7000,21000,0],[15000,19000,0],[25000,22000,0],
	// [6000,15000,0],[15000,15000,0],[23000,15000,0],
	// [7000,10000,0],[15000,10000,0],[19000,10000,0]
];
{
	_pos = getMarkerPos _x;
	//systemChat str _pos;
	_marker = createMarker [(format ["Sect P x %1, y %2", (_pos select 0), (_pos select 1)]), _pos]; 
	_marker setMarkerType "loc_CivilDefense";
	//_marker setMarkerColor "colorOPFOR";
	_marker setMarkerText format["x %1, y %2", (_pos select 0), (_pos select 1)];
	
	_markerT = createMarker [(format ["Sect Z x %1, y %2", (_pos select 0), (_pos select 1)]), _pos];
	_markerT setMarkerShape "ELLIPSE";
	_markerT setMarkerSize [5000, 5000];
	_markerT setMarkerBrush "SolidBorder";
	_markerT setMarkerAlpha 0.4; 
	_markerT setMarkerColor "ColorBlue";
} forEach _Sect; //*/



// _caller = _this select 1;
// _caller setPos (getpos _random); */

//systemChat(str(count Maison))

